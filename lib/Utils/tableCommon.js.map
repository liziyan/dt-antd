{"version":3,"sources":["../../src/Utils/tableCommon.js"],"names":["tableChange","state","callBack","pagination","searchList","currentPage","current","pageSize","currentNo","tableSearch","values","text","JSON","parse","stringify","replace","tableSearchCustom","status"],"mappings":";;;;;;kQAAA;;;;;AAGA;;kBACe;AACb;;;;;;AAMAA,eAAa,2BAAkC;AAAA,QAAhCC,KAAgC,QAAhCA,KAAgC;AAAA,QAAzBC,QAAyB,QAAzBA,QAAyB;AAAA,QAAfC,UAAe,QAAfA,UAAe;;AAC7C,QAAIC,0BACCH,MAAMG,UADP;AAEFC,mBAAaF,WAAWG,OAFtB;AAGFC,gBAAUJ,WAAWI;AAHnB,MAAJ;AAKA,QAAG,CAAC,mBAAG,uBAAON,MAAMG,UAAb,CAAH,EAA6B,uBAAOA,UAAP,CAA7B,CAAJ,EAAqD;AACnDF,eAAS;AACPE,8BADO;AAEPI,mBAAWL,WAAWG,OAFf;AAGPC,kBAAUJ,WAAWI;AAHd,OAAT;AAKD;AACF,GApBY;AAqBb;;;;;;AAMAE,eAAa,4BAA6B;AAAA,QAA3BR,KAA2B,SAA3BA,KAA2B;AAAA,QAApBS,MAAoB,SAApBA,MAAoB;AAAA,QAAZR,QAAY,SAAZA,QAAY;;AACxC,QAAIS,oBACCD,MADD,CAAJ;AAGA;AACAC,WAAOC,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAeH,IAAf,EAAqBI,OAArB,CAA6B,KAA7B,EAAmC,IAAnC,CAAX,CAAP;AACA;AACA,QAAG,CAAC,mBAAG,uBAAOd,MAAMG,UAAb,CAAH,EAA6B,uBAAOO,IAAP,CAA7B,CAAJ,EAA+C;AAC7CT,eAAS;AACPE,oBAAYO,IADL;AAEPH,mBAAW;AAFJ,OAAT;AAID;AACF,GAxCY;AAyCb;;;;;;AAMAQ,qBAAmB,kCAA6B;AAAA,QAA3Bf,KAA2B,SAA3BA,KAA2B;AAAA,QAApBS,MAAoB,SAApBA,MAAoB;AAAA,QAAZR,QAAY,SAAZA,QAAY;;AAC9C,QAAIS,oBACCD,MADD,CAAJ;AAGA;AACAC,WAAOC,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAeH,IAAf,EAAqBI,OAArB,CAA6B,KAA7B,EAAmC,IAAnC,CAAX,CAAP;AACA,QAAGJ,KAAKM,MAAL,IAAe,CAAlB,EAAqBN,KAAKM,MAAL,GAAc,CAACN,KAAKM,MAAN,CAAd;AACrB;AACA,QAAG,CAAC,mBAAG,uBAAOhB,MAAMG,UAAb,CAAH,EAA6B,uBAAOO,IAAP,CAA7B,CAAJ,EAA+C;AAC7CT,eAAS;AACPE,oBAAYO,IADL;AAEPH,mBAAW;AAFJ,OAAT;AAID;AACF;AA7DY,C","file":"tableCommon.js","sourcesContent":["/**\r\n * 有表格的页面，都会用到的公用方法\r\n */\r\nimport { is, fromJS } from 'immutable';\r\nexport default {\r\n  /**\r\n   * [表格更改之后的方法，改变state重新查询]\r\n   * @param  {[type]} options.state      [当前的state，searchList表示搜索条件，每个页面需一致]\r\n   * @param  {[type]} options.callBack   [回调函数，改变state,并重新搜索]\r\n   * @param  {[type]} options.pagination [分页的返回参数]\r\n   */\r\n  tableChange: ({state, callBack, pagination}) =>{\r\n    let searchList = {\r\n      ...state.searchList,\r\n      currentPage: pagination.current,\r\n      pageSize: pagination.pageSize,\r\n    }\r\n    if(!is(fromJS(state.searchList), fromJS(searchList))){\r\n      callBack({\r\n        searchList,\r\n        currentNo: pagination.current,\r\n        pageSize: pagination.pageSize,\r\n      })      \r\n    }\r\n  },\r\n  /**\r\n   * [搜索表格（搜索按钮点击）]\r\n   * @param  {[type]} options.state    [当前的state,searchList表示搜索条件，每个页面需一致]\r\n   * @param  {[type]} options.values   [搜索的条件，只接收最终的至]\r\n   * @param  {[type]} options.callBack [回调函数，改变state,并重新请求数据]\r\n   */\r\n  tableSearch: ({state, values, callBack})=>{\r\n    let text = {\r\n      ...values,\r\n    }   \r\n    // 将所有的\"\"空，转为null，方便后台接收\r\n    text = JSON.parse(JSON.stringify(text).replace(/\"\"/g,null));\r\n    // 对比两次的搜索条件，如果不同的话执行搜索请求\r\n    if(!is(fromJS(state.searchList), fromJS(text))){\r\n      callBack({\r\n        searchList: text,\r\n        currentNo: 1,\r\n      })\r\n    }\r\n  },\r\n  /**\r\n   * [搜索表格（搜索按钮点击）定制公交专用，因为status返回的数组]\r\n   * @param  {[type]} options.state    [当前的state,searchList表示搜索条件，每个页面需一致]\r\n   * @param  {[type]} options.values   [搜索的条件，只接收最终的至]\r\n   * @param  {[type]} options.callBack [回调函数，改变state,并重新请求数据]\r\n   */\r\n  tableSearchCustom: ({state, values, callBack})=>{\r\n    let text = {\r\n      ...values,\r\n    }   \r\n    // 将所有的\"\"空，转为null，方便后台接收\r\n    text = JSON.parse(JSON.stringify(text).replace(/\"\"/g,null));  \r\n    if(text.status >= 0) text.status = [text.status];    \r\n    // 对比两次的搜索条件，如果不同的话执行搜索请求\r\n    if(!is(fromJS(state.searchList), fromJS(text))){\r\n      callBack({\r\n        searchList: text,\r\n        currentNo: 1,\r\n      })\r\n    }\r\n  },\r\n}"]}